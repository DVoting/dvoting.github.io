var De=Object.defineProperty,Ae=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ve=(t,r,a)=>r in t?De(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,L=(t,r)=>{for(var a in r||(r={}))He.call(r,a)&&ve(t,a,r[a]);if(ye)for(var a of ye(r))Be.call(r,a)&&ve(t,a,r[a]);return t},P=(t,r)=>Ae(t,Re(r));import{r as l,j as e,W as ce,a as n,R as w,t as E,N as de,C as te,b as se,c as re,F as _,d as Me,e as ze,f as Ge,V as _e,B as Ve,g as we,h as k,i as xe,k as j,A as qe,l as Fe,M as je,m as We,n as Ue,S as Ke,o as Je,p as Ye,q as W,s as H,u as Xe,v as Qe,w as Q,x as D,y as ee,z as i,L as q,D as Z,E as be,G as ae,H as O,T as Ze,I as le,P as Ce,J as Ie,K as Se,O as et,Q as tt,U as rt,X as ie,Y as at,Z as Ne,_ as nt,$ as st,a0 as B,a1 as ot,a2 as lt}from"./vendor.817745f5.js";const it=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}};it();const A=l.exports.createContext({user:null,walletId:null,isAuth:!1,loading:!1}),ct=t=>{const[r,a]=l.exports.useState(""),[s,o]=l.exports.useState(80001),[c,u]=l.exports.useState(null),[h,C]=l.exports.useState(!1),[p,m]=l.exports.useState(!1);return e(A.Provider,{value:{user:c,setUser:u,walletId:r,setWalletId:a,isAuth:h,setIsAuth:C,loading:p,setLoading:m,chainId:s,setChainId:o},children:t.children})};let ue;if(window.ethereum)console.log("MetaMask is installed!"),ue=new ce(window.ethereum);else{console.log("MetaMask is NOT installed!");const t="https://speedy-nodes-nyc.moralis.io/2aa1ce4616e3c936bfbb33b8/polygon/mumbai",r=new ce.providers.HttpProvider(t,{chainId:80001,name:"Mumbai"});ue=new ce(r)}var Y=ue;const U=(t,r)=>n(w.Fragment,{children:[e("span",{children:t||""}),e("br",{}),e("span",{children:r||""})]}),dt={1:"Ethereum Main Network",2:"Expanse Network",3:"Ropsten Test Network",4:"Rinkeby Test Network",5:"Goerli Test Network",42:"Kovan Test Network",56:"BSC Main Network",97:"BSC Test Network",43114:"Avalanche Main C-Chain",43113:"Avalanche FUJI C-Chain",137:"Polygon Main Network",80001:"Mumbai Test Network"},ke=t=>dt[t]||`Unknown Network (${t})`;async function ut(t,r){var o;let a=(o=JSON.parse(localStorage.getItem("walletDisabled")))!=null?o:!1;console.log(a);let s=await Y.eth.getChainId();r(s),window.ethereum&&(Y.eth.getAccounts().then(c=>{a||t(c[0]||"")}).catch(console.log),window.ethereum.on("accountsChanged",c=>{var h;((h=JSON.parse(localStorage.getItem("walletDisabled")))!=null?h:!1)||t(c[0]||"")}),window.ethereum.on("chainChanged",async()=>{s=await Y.eth.getChainId(),r(s)}))}async function ht(t){localStorage.setItem("walletDisabled",!0),t("")}async function pt(t){if(!window.ethereum){E.error(U("Provider Error","MetaMask is NOT installed!"),{position:E.POSITION.BOTTOM_RIGHT,autoClose:5e3,toastId:"providerError",closeOnClick:!0,pauseOnHover:!1,draggable:!1});return}localStorage.setItem("walletDisabled",!1);try{const r=await window.ethereum.request({method:"eth_requestAccounts"});t(r[0]||"")}catch(r){console.log(r)}}async function Te(t){console.log(t);let[r]=await Y.eth.getAccounts();try{return await Y.eth.personal.sign(Y.utils.keccak256(t),r,null)}catch(a){return E.error(U(a.message.split(":")[0],a.message.split(":")[1]),{position:E.POSITION.BOTTOM_RIGHT,autoClose:5e3,toastId:"signatureError",closeOnClick:!0,pauseOnHover:!1,draggable:!1}),null}}const mt=()=>{const{user:t,setUser:r,isAuth:a,setIsAuth:s,setLoading:o}=l.exports.useContext(A),{walletId:c,setWalletId:u}=l.exports.useContext(A),{chainId:h,setChainId:C}=l.exports.useContext(A),p=()=>{localStorage.removeItem("token"),s(!1),r(null),o(!1)};return l.exports.useEffect(async()=>{await ut(u,C)},[]),e("header",{children:e(de,{children:n(te,{children:[e(se.LinkContainer,{to:a?"/dashboard":"/",children:e(de.Brand,{children:e("h2",{children:"DVoting"})})}),e(se.LinkContainer,{to:"/explore",style:{marginRight:"auto"},children:e(re.Link,{children:"Explore"})}),e(de.Toggle,{"aria-controls":"basic-navbar-nav"}),n(re,{className:"ml-auto",children:[t?e(_,{children:n(Me,{children:[t.name,e(se.LinkContainer,{to:"#",onClick:p,children:n(re.Link,{children:[e(ze,{})," Logout"]})})]})}):n(_,{children:[e(se.LinkContainer,{to:"/login",children:n(re.Link,{children:[e(Ge,{})," Log In"]})}),e(se.LinkContainer,{to:"/signup",children:n(re.Link,{children:[e(_e,{})," SignUp"]})})]}),c===""?n(re.Link,{onClick:()=>pt(u),children:[e(Ve,{size:20})," Connect Wallet"]}):e(we,{title:c.slice(0,4)+"..."+c.slice(-4),children:e(we.Item,{onClick:()=>ht(u),children:"Disconnect"})})]})]})})})},gt=()=>n("footer",{className:"text-center",children:["\xA9 2022 |"," ",e("a",{href:"https://github.com/DVoting/dvoting.github.io",children:"D-Voting"})]});var ft="./assets/vote.90a295f2.png";const yt="_root1_zwkyz_1",vt="_root2_zwkyz_5",wt="_root3_zwkyz_11";var he={root1:yt,root2:vt,root3:wt};const xt=()=>n("div",{className:`${he.root1} d-flex justify-content-evenly align-items-center py-5`,style:{minHeight:"85vh"},children:[n("div",{className:"",style:{maxWidth:"45%"},children:[n("div",{className:"display-4 fw-bold",children:["Empowering India",e("p",{className:"text-info",children:"Through Blockchain"})]}),n("div",{className:"py-5",children:[e("p",{children:"A De-centralized Voting App which addresses the issue of maintaining anonymity of voters on a public blockchain network, achieving lower latency and affordability in the existing models."}),e(k,{variant:"outline-primary",className:"px-4 py-2",href:"/login",children:"Login"}),e(k,{variant:"info",className:"px-4 py-2 mx-5",href:"/signup",children:"Get Started"})]})]}),e("div",{className:"",style:{maxWidth:"30%"},children:e("img",{src:ft,style:{maxWidth:"100%"}})})]}),pe=[{Icon:qe,title:"Safe and Secure",description:"The casted votes are safely and securely stored in the blockchain database, which mitigates any form of manipulation / tampering like the deletion of legitimate votes or the addition of illegitimate votes."},{Icon:Fe,title:"Accuracy with Transparency",description:"The casting of votes and tallying of the votes would be a lot quicker while also providing better transparency and accuracy."},{Icon:je,title:"Privacy OP :)",description:"We do not link your Wallet address and your profile identity, thereby keeping your vote anonymous. Also, you can verify that your vote has been recorded or not using the Transaction Id."}],bt=()=>n("div",{className:he.root2,children:[e("h1",{className:"fw-bold",children:"Notable Features"}),e(xe,{children:pe==null?void 0:pe.map((t,r)=>{const{Icon:a,title:s,description:o}=t;return n(j,{className:"rounded-3 d-flex flex-direction-col justify-content-center align-items-center px-3 py-4 mx-4 my-5",children:[e(a,{size:50,className:"m-3"}),n(j.Body,{className:"px-4",children:[e(j.Title,{className:"fw-bold",children:s}),e(j.Text,{style:{textAlign:"justify"},children:o})]})]},r)})})]}),me=[{Icon:We,title:"React"},{Icon:Ue,title:"Node.js"},{Icon:Ke,title:"Solidity"},{Icon:Je,title:"Web3"},{Icon:Ye,title:"VS Code"}],Ct=()=>n("div",{className:he.root3,children:[e("h2",{className:"fw-bold",children:"Tech Stack"}),e(xe,{children:me==null?void 0:me.map((t,r)=>{const{Icon:a,title:s}=t;return n(j,{className:"rounded-pill d-flex flex-direction-col justify-content-center align-items-center mx-4 my-5 shadow-sm",children:[e(a,{size:50,className:"m-3"}),e(j.Body,{className:"",children:e(j.Title,{className:"fw-bold",children:s})})]},r)})})]});var It="./assets/curve-1.bf7c1ae6.png",St="./assets/curve-2.d369b78c.png",Nt="./assets/curve-3.d6a5c9dd.png";const oe=({children:t})=>e(te,{children:e(W,{className:"justify-content-md-center",children:e(H,{xs:12,md:6,children:t})})}),K=({variant:t,children:r})=>e(Xe,{variant:t,children:r});K.defaultProps={variant:"info"};const F=()=>e(Qe,{animation:"border",role:"status",style:{width:"4vh",height:"4vh",margin:"25vh auto",display:"block",color:"black"}}),kt=()=>{const{isAuth:t,setIsAuth:r,loading:a,setLoading:s}=l.exports.useContext(A),o=Q();return w.useEffect(()=>{s(!0),r("token"in localStorage),t&&o("/dashboard",{replace:!0}),s(!1)},[t]),e(_,{children:a?e(F,{}):e(_,{children:n("div",{style:{minHeight:"150vh",width:"100%"},children:[e("img",{src:It,style:{position:"absolute",right:"0px",maxWidth:"60%",zIndex:"-1"}}),e(xt,{}),e("img",{src:St,style:{position:"absolute",left:"0px",maxWidth:"20%",zIndex:"-1"}}),e(bt,{}),e("img",{src:Nt,style:{position:"absolute",right:"0px",maxWidth:"18%",zIndex:"-1"}}),e(Ct,{}),e(gt,{})]})})})},R="https://dvoting-server.vercel.app/api";Date.prototype.addHours=function(t){return this.setTime(this.getTime()+t*60*60*1e3),this};const Tt=async t=>{try{const r={headers:{"Content-Type":"application/json"}},a=await D.post(`${R}/users/login`,t,r);return localStorage.setItem("token",a.data.token),a.data}catch(r){throw r}},Et=async()=>{const t=localStorage.getItem("token"),r={headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`}};try{const{data:a}=await D.get(`${R}/users/profile`,r);return P(L({},a),{error:!1})}catch(a){return console.log(a.response),P(L({},a),{error:!0})}},Ot=async t=>{try{const r={headers:{"Content-Type":"application/json"}},a=await D.post(`${R}/users`,t,r);return localStorage.setItem("token",a.data.token),a.data}catch(r){throw r}},Lt=async t=>{const r=localStorage.getItem("token");try{const a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}},s=await D.put(`${R}/users/verify`,t,a);return localStorage.setItem("token",s.data.token),s.data}catch(a){throw a}},Ee=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await D.put(`${R}/users/profile`,t,r)).data}catch(r){throw r}},Pt=()=>{const[t,r]=l.exports.useState(""),[a,s]=l.exports.useState(""),[o,c]=l.exports.useState(!1),u=ee(),h=Q(),C=u.search?u.search.split("=")[1]:"/",{isAuth:p,setIsAuth:m,loading:b,setLoading:x}=l.exports.useContext(A);return l.exports.useEffect(()=>{m("token"in localStorage),p&&(x(!1),h("/dashboard",{replace:!0}))},[p]),e(_,{children:b?e(F,{}):e(_,{children:e("div",{children:n(oe,{children:[e("h1",{children:"Login"}),o&&e(K,{variant:"danger",children:o}),n(i,{onSubmit:async f=>{f.preventDefault(),x(!0);try{await Tt({email:t,password:a}),m("token"in localStorage)}catch(v){console.log(v),v.response&&v.response.data.message?c(v.response.data.message):c(v.message)}x(!1)},onReset:f=>{f.preventDefault(),r(""),s("")},children:[n(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter email",value:t,required:!0,onChange:f=>{c(!1),r(f.target.value)}})]}),n(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter password",value:a,required:!0,onChange:f=>{c(!1),s(f.target.value)}})]}),n(W,{className:"py-3",children:[e(H,{children:e(k,{type:"submit",variant:"primary",children:"Sign In"})}),e(H,{children:e(k,{type:"reset",variant:"primary",children:"Reset"})})]}),n(W,{children:[n(H,{children:["New User?"," ",e(q,{to:C?`/signup?redirect=${C}`:"/signup",children:"Register Here"})]}),n(H,{children:["Forgot Password?"," ",e(q,{to:C?`/forgotpassword?redirect=${C}`:"/forgotpassword",children:"Click here"})]})]})]})]})})})})},$t=()=>{const[t,r]=l.exports.useState(""),[a,s]=l.exports.useState(""),[o,c]=l.exports.useState(""),[u,h]=l.exports.useState(""),[C,p]=l.exports.useState("voter"),[m,b]=l.exports.useState(!1),x=ee(),g=Q(),I=x.search?x.search.split("=")[1]:"/",{isAuth:f,setIsAuth:v,loading:d,setLoading:S}=l.exports.useContext(A);return l.exports.useEffect(()=>{v("token"in localStorage),f&&(S(!1),g("/dashboard",{replace:!0}))},[f]),e(_,{children:d?e(F,{}):e(_,{children:e("div",{children:n(oe,{children:[e("h1",{children:"SignUp"}),m&&e(K,{variant:"danger",children:m}),n(i,{onSubmit:async M=>{M.preventDefault(),S(!0);try{await Ot({username:a,email:o,password:u,name:t,userType:C}),v("token"in localStorage)}catch(T){console.log(T),T.response&&T.response.data.message?b(T.response.data.message):b(T.message)}S(!1)},onReset:M=>{M.preventDefault(),r(""),s(""),c(""),h(""),p("voter")},children:[n(i.Group,{controlId:"name",children:[e(i.Label,{children:"Name"}),e(i.Control,{type:"text",placeholder:"Enter name",value:t,required:!0,onChange:M=>{b(!1),r(M.target.value)}})]}),n(i.Group,{controlId:"username",children:[e(i.Label,{children:"Username"}),e(i.Control,{type:"text",placeholder:"Enter username",value:a,required:!0,onChange:M=>{b(!1),s(M.target.value)}})]}),n(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter email",value:o,required:!0,onChange:M=>{b(!1),c(M.target.value)}})]}),n(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter password",value:u,required:!0,onChange:M=>{b(!1),h(M.target.value)}})]}),n(W,{className:"py-3",children:[e(H,{children:e(k,{type:"submit",variant:"primary",children:"Sign Up"})}),e(H,{children:e(k,{type:"reset",variant:"primary",children:"Reset"})})]}),e(W,{children:n(H,{children:["Already registered?"," ",e(q,{to:I?`/login?redirect=${I}`:"/signup",children:"Login Here"})]})})]})]})})})})},Dt=async t=>{const r=localStorage.getItem("token"),a={headers:{"Content-type":"application/json",Authorization:`Bearer ${r}`}},s=t._id;try{const{data:o}=await D.get(`${R}/organisers?user=${s}`,a);return P(L({},o),{error:!1})}catch(o){return console.log(o),P(L({},o),{error:!0})}},At=async t=>{const r=localStorage.getItem("token"),a={headers:{"Content-type":"application/json",Authorization:`Bearer ${r}`}};try{const{data:s}=await D.delete(`${R}/organisers/${t}`,a);return P(L({},s),{error:!1})}catch(s){return console.log(s),P(L({},s),{error:!0})}};async function Rt(t){const r=localStorage.getItem("token"),a={headers:{"Content-type":"application/json",Authorization:`Bearer ${r}`}};try{const{data:s}=await D.post(`${R}/organisers`,t,a);return console.log(s),s}catch(s){return console.log(s),P(L({},s.response),{error:!0})}}const Oe=t=>{const{show:r,setShow:a,setRedirect:s}=t,[o,c]=w.useState({organisationName:""}),u=p=>{c(P(L({},o),{[p.target.name]:p.target.value}))},h=async p=>{if(p.preventDefault(),!C())return;const m=await Rt(o);if(m.error){console.log(m),E.error(U(`error ${m.status}`,`${m.data&&m.data.message||m.statusText}`),{position:E.POSITION.BOTTOM_RIGHT});return}c(b=>P(L({},b),{organisationName:""})),a(!1),s("/org")},C=()=>o.organisationName.length<4?(E.error(U("Organiser Name","must be at least 4 characters long"),{position:E.POSITION.BOTTOM_RIGHT}),!1):!0;return n(Z,{size:"lg",show:r,onHide:()=>a(!1),"aria-labelledby":"createOrganiserModal",children:[e(Z.Header,{closeButton:!0,children:e(Z.Title,{id:"createOrganiserModal",children:"Create Organiser"})}),e(Z.Body,{children:n(i,{children:[e(be,{label:"Organiser name",className:"mb-3",children:e(i.Control,{type:"text",name:"organisationName",value:o.organisationName,onChange:u,required:!0})}),e(k,{className:"text-center",variant:"primary",type:"submit",onClick:h,children:"Create"})]})})]})},Ht=async(t,r)=>{const a=localStorage.getItem("token"),s={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}},o=P(L({},t),{organiser:r});try{const{data:c}=await D.post(`${R}/elections`,o,s);return c}catch(c){throw c}};async function ne(t){try{const{data:r}=await D.get(`${R}/elections?${t}`);return r.docs}catch(r){return console.log(r),null}}async function Bt(t,r){const a=localStorage.getItem("token"),s={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}};try{const{data:o}=await D.put(`${R}/elections/${t}`,r,s);return o}catch(o){throw o}}async function Le(t){try{const{data:r}=await D.get(`${R}/elections/${t}`);return r}catch(r){return P(L({},r),{error:!0})}}async function ge(t){try{const{data:r}=await D.get(`${R}/elections/${t}/candidates`);return r}catch(r){console.log(r)}}async function Mt(t,r){const a=localStorage.getItem("token"),s={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}};try{const{data:o}=await D.post(`${R}/elections/${t}/candidates`,r,s);return o}catch(o){throw o}}async function zt(t,r){const a=localStorage.getItem("token"),s={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}};try{const{data:o}=await D.delete(`${R}/elections/${t}/candidates/${r}`,s);return o}catch(o){throw o}}async function Gt(t){const r=localStorage.getItem("token"),a={headers:{"Content-type":"application/json",Authorization:`Bearer ${r}`}};try{const{data:s}=await D.patch(`${R}/elections/${t}/deploy`,{},a);return s}catch(s){throw s}}async function fe(t){try{const{data:r}=await D.get(`${R}/voters/${t}`);return console.log(r),r}catch(r){return console.log(r),null}}async function _t(t){const r=localStorage.getItem("token"),a={headers:{"Content-type":"application/json",Authorization:`Bearer ${r}`}};try{const{data:s}=await D.patch(`${R}/voters/wallet`,t,a);return console.log(s),s}catch(s){return console.log(s),P(L({},s.response),{error:!0})}}async function Vt(t,r){const a=localStorage.getItem("token"),s={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}};try{const{data:o}=await D.patch(`${R}/elections/${t}/wallet`,r,s);return console.log(o),o}catch(o){return console.log(o),P(L({},o.response),{error:!0})}}const qt=()=>{const{user:t,loading:r,setLoading:a}=w.useContext(A),[s,o]=w.useState(!1),[c,u]=w.useState(null),[h,C]=w.useState([]),[p,m]=w.useState([]),[b,x]=w.useState([]),[g,I]=w.useState([]),[f,v]=w.useState(null);return w.useEffect(()=>{a(t===null),console.log(t)},[t]),w.useEffect(async()=>{t&&u(await fe(t.uniqueVoterId))},[t]),w.useEffect(async()=>{if(c&&c.invitations.length>0){const d=`ids=${c.invitations.join(",")}`;C(await ne(d))}},[c]),w.useEffect(async()=>{if(t){const d=`appliedVoter=${t.uniqueVoterId}`;m(await ne(d))}},[t]),w.useEffect(async()=>{if(t){const d=`approvedVoter=${t.uniqueVoterId}`;x(await ne(d))}},[t]),w.useEffect(async()=>{if(t){const d=`appearedVoter=${t.uniqueVoterId}`;I(await ne(d))}},[t]),f?e(ae,{replace:!0,to:f}):r?e(F,{}):e(w.Fragment,{children:e(te,{children:n(W,{children:[n(H,{md:12,lg:4,children:[e(j,{children:t&&n(w.Fragment,{children:[e(j.Header,{children:"User Profile"}),n(O,{variant:"flush",children:[n(O.Item,{children:["Username: ",t.username]}),n(O.Item,{children:["Name: ",t.name]}),n(O.Item,{children:["E-mail: ",t.email," ",t.emailVerified?e("span",{className:"text-success",children:"verified"}):e(q,{to:"/verifyEmail",children:"verify"})]}),n(O.Item,{children:["UVID: ",t.uniqueVoterId]}),c&&n(O.Item,{children:["Wallet:"," ",c.hasWallet?n(w.Fragment,{children:[e("span",{className:"text-success",children:"assigned"})," | ","Nonce: #",c.nonce]}):e(q,{to:"wallet",children:"generate"})]}),e(O.Item,{children:e(q,{to:"/changePassword",children:"Change Password"})})]})]})}),e(j,{style:{marginTop:"5%",marginBottom:"5%"},children:t&&n(O,{variant:"flush",children:[t.userType==="voter"&&n(w.Fragment,{children:[e(O.Item,{onClick:()=>o(!0),style:{cursor:"pointer"},children:"Register an Organisation"}),e(Oe,{show:s,setShow:o,setRedirect:v})]}),t.userType==="organiser"&&e(q,{to:"/org",children:e(O.Item,{children:"Manage Organizations"})})]})})]}),e(H,{md:12,lg:8,children:n(j,{children:[e(j.Header,{children:"Elections"}),e(j.Body,{children:c&&n(Ze,{defaultActiveKey:"invited",className:"mb-3",children:[e(le,{eventKey:"invited",title:"Invited",children:h.length>0?e(O,{variant:"flush",children:h.map(d=>e(q,{to:`/elections/${d._id}`,children:e(O.Item,{children:d.title})},d._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(le,{eventKey:"approved",title:"Approved",children:b.length>0?e(O,{variant:"flush",children:b.map(d=>e(q,{to:`/elections/${d._id}`,children:e(O.Item,{children:d.title})},d._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(le,{eventKey:"applied",title:"Applied",children:(p==null?void 0:p.length)>0?e(O,{variant:"flush",children:p.map(d=>e(q,{to:`/elections/${d._id}`,children:e(O.Item,{children:d.title})},d._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(le,{eventKey:"appeared",title:"Appeared",children:g.length>0?e(O,{variant:"flush",children:g.map(d=>e(q,{to:`/elections/${d._id}`,children:e(O.Item,{children:d.title})},d._id))}):e(w.Fragment,{children:"Nothing here... "})})]})})]})})]})})})},Ft=()=>{const{loading:t,setLoading:r,user:a}=w.useContext(A),{walletId:s,setWalletId:o}=l.exports.useContext(A),[c,u]=w.useState(null),[h,C]=w.useState(null),[p,m]=w.useState(""),[b,x]=w.useState(null),[g,I]=w.useState(null),[f,v]=w.useState(0),[d,S]=w.useState(!1);w.useEffect(()=>{let V="0",G=!1;document.addEventListener("mousemove",$=>{G=!0;let y=Math.sqrt($.offsetX*$.offsetX+$.offsetY*$.offsetY);y=Math.round(y)*17%16,V=y.toString(16)}),setInterval(()=>{G=!1},200),setInterval(()=>{m($=>(f<100&&v(Math.round($.length/64*100)),$.length<64&&G?$+V:$))},100)},[]),w.useEffect(()=>{r(!a||!h),h&&h.hasWallet&&u("/dashboard"),console.log(a)},[a,h]),w.useEffect(async()=>{a&&C(await fe(a.uniqueVoterId))},[a]);const J=()=>{if(b)return;let V="";for(let $ of p){let y=parseInt($,16);y=y^Math.floor(Math.random()*16),V+=y.toString(16)}x(V);let G=Y.eth.accounts.privateKeyToAccount(V);I(G.address),console.log(G)},N=async(V,G=null)=>{await navigator.clipboard.writeText(V),E.info(U(G,"copied to clipboard"),{position:E.POSITION.BOTTOM_CENTER,autoClose:500,hideProgressBar:!0,toastId:"copyToast"})},M=(V,G)=>{let $=document.createElement("a");$.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(G)),$.setAttribute("download",V),$.style.display="none",document.body.appendChild($),$.click(),document.body.removeChild($)},T=async()=>{if(!s){E.error(U("No wallet connected",null),{position:E.POSITION.BOTTOM_RIGHT,autoClose:5e3,toastId:"walletError",closeOnClick:!0,pauseOnHover:!1,draggable:!1});return}let V=JSON.stringify({voter:h._id,address:Y.utils.toChecksumAddress(s)}),G=await Te(V);if(!G)return;let $={address:Y.utils.toChecksumAddress(s),signature:G};const y=await _t($);if(y.error){console.log(y),E.error(U(`error ${y.status}`,`${y.data||y.statusText}`),{position:E.POSITION.BOTTOM_RIGHT});return}E.success(U("Approved Wallet",`${g}`),{position:E.POSITION.BOTTOM_RIGHT}),u("/dashboard")};return c?e(ae,{replace:!0,to:c}):t?e(F,{}):e(w.Fragment,{children:e(te,{children:n(W,{children:[e(H,{md:12,lg:2}),n(H,{md:12,lg:8,children:[n("p",{children:["Generating Ethereum Wallet...",e("br",{}),"MOVE your mouse around to add some extra randomness..."]}),n(i,{children:[n(be,{label:"Randomness",className:"mb-3",children:[e(i.Control,{as:"textarea",value:p,disabled:!0,style:{resize:"none",height:"5rem"}}),f===100?e(Ce,{variant:"success",now:100,label:"Done"}):e(Ce,{now:f,label:`${f}%`})]}),e("div",{className:"d-grid gap-2",children:e(k,{variant:"primary",onClick:()=>J(),disabled:f!==100,children:"Generate Ethereum Wallet"})})]}),e("hr",{}),g&&n(i,{children:[n(i.Group,{className:"mb-3",children:[e(i.Label,{children:"Ethereum address"}),n(Ie,{children:[e(i.Control,{type:"text",value:g,onChange:()=>{}}),e(k,{variant:"light",onClick:()=>N(g,"Address"),children:e(Se,{})})]})]}),n(i.Group,{className:"mb-3",children:[e(i.Label,{children:"Private key"}),n(Ie,{children:[e(i.Control,{type:d?"text":"password",value:b,onChange:()=>{}}),e(k,{variant:"light",onClick:()=>S(!d),children:d?e(et,{size:20}):e(tt,{size:20})}),e(k,{variant:"light",onClick:()=>N(b,"Private key"),children:e(Se,{})}),e(k,{variant:"light",onClick:()=>M("key.txt",b),children:e(rt,{})})]})]}),e("hr",{}),e(i.Group,{className:"mb-3",children:s.toLowerCase()===g.toLowerCase()?e(k,{variant:"primary",onClick:async()=>{await T()},children:"Approve Wallet"}):n("p",{className:"alert alert-info",children:["Before proceeding, connect the above wallet by importing it's private key."," ",e("a",{href:"https://metamask.zendesk.com/hc/en-us/articles/360015489331-How-to-import-an-Account",target:"_blank",rel:"noreferrer",children:"steps"})]})})]})]}),e(H,{md:12,lg:2})]})})})},jt=[{name:"Email not entered",value:"1"},{name:"OTP sent from server",value:"2"},{name:"Change password",value:"3"}],Wt=[{name:"Email not pressed",value:"1"},{name:"OTP sent from server",value:"2"}],Pe=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await D.put(`${R}/otp`,t,r)).data}catch(r){throw r}},$e=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await D.patch(`${R}/otp/verify`,t,r)).data}catch(r){throw r}},Ut=()=>{const{user:t,loading:r,setLoading:a,setUser:s}=l.exports.useContext(A),[o,c]=l.exports.useState("fetching..."),[u,h]=l.exports.useState(""),[C,p]=l.exports.useState(Wt[0].value),[m,b]=l.exports.useState(!1),[x,g]=l.exports.useState(!1),I=Q();return l.exports.useEffect(()=>{a(!0),t&&(c(t.email),a(!1),t.emailVerified&&I("/dashboard",{replace:!0}))},[t]),e(_,{children:r?e(F,{}):e("div",{children:n(oe,{children:[e("h1",{children:"Verify Email"}),x&&e(K,{variant:"success",children:x}),m&&e(K,{variant:"danger",children:m}),e(i,{onSubmit:async v=>{switch(v.preventDefault(),b(!1),g(!1),C){case"1":a(!0);const d="OTP for e-mail Verification";try{await Pe({email:o,purpose:d}),p("2")}catch(S){console.log(S),S.response&&S.response.data.message?b(S.response.data.message):b(S.message)}a(!1);break;case"2":a(!0);try{await $e({email:o,otp:u});const S=await Lt({email:o});g("Email has been verified"),s(S),I("/dashboard",{replace:!0})}catch(S){console.log(S),S.response&&S.response.data.message?b(S.response.data.message):b(S.message)}a(!1);break}},children:e(W,{className:"py-3",children:n(H,{children:[n(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter your email",value:o,disabled:!0,required:!0})]}),C==="2"&&n(i.Group,{controlId:"otp",children:[e(i.Label,{children:"OTP"}),e(i.Control,{type:"text",placeholder:"Enter OTP received on email",value:u,required:!0,onChange:v=>{b(!1),h(v.target.value)}})]}),e(W,{className:"py-3",children:e(H,{children:e(k,{type:"submit",variant:"primary",children:C=="1"?"Send OTP":"Verify Email"})})})]})})})]})})})},Kt=()=>{const[t,r]=l.exports.useState("fetching..."),[a,s]=l.exports.useState(""),[o,c]=l.exports.useState(""),[u,h]=l.exports.useState(!1),[C,p]=l.exports.useState(!1),m=Q(),{loading:b,user:x,setLoading:g}=l.exports.useContext(A);return l.exports.useEffect(()=>{g(!0),x&&(r(x.email),g(!1))},[x]),e(_,{children:b?e(F,{}):e("div",{children:n(oe,{children:[e("h1",{children:"Change Password"}),C&&e(K,{variant:"success",children:C}),u&&e(K,{variant:"danger",children:u}),n(i,{onSubmit:async v=>{if(v.preventDefault(),h(!1),p(!1),a!==o){h("Passwords don't match");return}try{g(!0),await Ee({email:t,password:a}),g(!1),p("Password changed.. Redirecting to dashboard"),setTimeout(()=>{m("/dashboard",{replace:!0})},[1e3])}catch(d){console.log(d),d.response&&d.response.data.message?h(d.response.data.message):h(d.message)}},onReset:async v=>{v.preventDefault(),s(""),c(""),h(!1),p(!1)},children:[n(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter new Password",value:a,required:!0,onChange:v=>{h(!1),s(v.target.value)}})]}),n(i.Group,{controlId:"confirmPassword",children:[e(i.Label,{children:"Confirm Password"}),e(i.Control,{type:"password",placeholder:"Confirm your new Password",value:o,required:!0,onChange:v=>{h(!1),c(v.target.value)}})]}),n(W,{className:"py-3",children:[e(H,{children:e(k,{type:"submit",variant:"primary",children:"Change Password"})}),e(H,{children:e(k,{type:"reset",variant:"primary",children:"Reset"})})]})]})]})})})},Jt=t=>{const{isOpen:r,setIsOpen:a,handleDelete:s,_id:o,deleting:c}=t,u=()=>a(!1);return n(Z,{show:r,onHide:u,centered:!0,children:[e(Z.Header,{closeButton:!0,children:e(Z.Title,{children:"Confirm Delete"})}),n(Z.Body,{children:[e("p",{children:"Are you sure you want to delete ?"}),e("h4",{children:o})]}),n(Z.Footer,{children:[e(k,{variant:"secondary",onClick:u,children:"Cancel"}),e(k,{variant:"danger",onClick:s,disabled:c,children:c?"Deleting":"Delete"})]})]})},Yt=()=>{const[t,r]=l.exports.useState(null),[a,s]=l.exports.useState(!1),[o,c]=l.exports.useState(null),[u,h]=l.exports.useState(!1),[C,p]=l.exports.useState(!1),{user:m}=l.exports.useContext(A),b=Q();if(l.exports.useEffect(()=>{(async()=>{if(m){const f=await Dt(m);if(f.error)return;r(f.docs)}})()},[m,a,u]),!t)return n("div",{children:[e("h1",{children:"Manage My Organizations"}),e(F,{})]});const x=(f,v)=>{b(`/org/${f}/create-election`,{state:v})},g=f=>{c(f),s(f)},I=async f=>{p(!0);const v=await At(f);if(p(!1),v.error){alert("Some error occured");return}s(!1)};return n("div",{children:[e(Jt,{isOpen:a,setIsOpen:s,_id:o,handleDelete:()=>I(o),deleting:C}),e(Oe,{show:u,setShow:h,setRedirect:()=>{}}),e("h2",{children:"Manage My Organizations"}),e(k,{onClick:()=>h(!0),children:"Create Organization"}),t.length===0?e("h3",{children:"No Organizations found!!"}):e(O,{as:"ol",numbered:!0,className:"my-4",children:t==null?void 0:t.map(f=>{const{organisationName:v,_id:d}=f;return n(O.Item,{as:"li",className:"d-flex flex-row",children:[n(q,{to:`/org/${d}`,style:{textDecoration:"none"},className:"flex-grow-1 px-3",children:[v,n("p",{children:["ID: ",d]})]}),e(k,{className:"align-self-center",onClick:()=>x(d,v),children:"Create Election"}),e("p",{className:"align-self-center text-danger m-3",style:{cursor:"pointer"},onClick:()=>g(d),children:"Delete"})]},d)})})]})},Xt=()=>{const[t,r]=l.exports.useState(null),a=ee();Q();let s=a.pathname.split("/")[2];return console.log(s),l.exports.useEffect(()=>{(async()=>{const o=await ne(`organiser=${s}`);o.error||r(o)})()},[]),t?n("div",{children:[e("h2",{children:"Organization Details"}),"Id - ",s,e(O,{as:"ol",numbered:!0,className:"my-4",children:t==null?void 0:t.map(o=>{const{title:c,_id:u}=o;return e(O.Item,{as:"li",className:"d-flex flex-row",children:n(q,{to:`/elections/${u}`,style:{textDecoration:"none"},className:"flex-grow-1 px-3",children:[c,n("p",{children:["ID: ",u]})]})},u)})})]}):n("div",{children:[e("h1",{children:"Organization Details"}),e(F,{})]})},Qt=()=>{const{isAuth:t,loading:r,setLoading:a,user:s}=l.exports.useContext(A),{walletId:o,setWalletId:c}=l.exports.useContext(A);let h=ee().pathname.split("/")[2];const[C,p]=w.useState(null),[m,b]=l.exports.useState({}),[x,g]=l.exports.useState(null),[I,f]=l.exports.useState(0);w.useEffect(async()=>{a(!0);try{b(await Le(h)),s&&g(await fe(s.uniqueVoterId))}catch(d){console.log(d)}a(!1)},[s]),w.useEffect(()=>{var d,S,J,N;s&&(((d=m==null?void 0:m.appearedVoters)==null?void 0:d.includes(s.uniqueVoterId))?f(5):((S=x==null?void 0:x.signedElections)==null?void 0:S.includes(h))?f(4):((J=m==null?void 0:m.approvedVoters)==null?void 0:J.includes(s.uniqueVoterId))?f(3):((N=m==null?void 0:m.appliedVoters)==null?void 0:N.includes(s.uniqueVoterId))?f(2):f(1))},[s,x,m]);const v=async()=>{if(!o){E.error(U("No wallet connected",null),{position:E.POSITION.BOTTOM_RIGHT,autoClose:5e3,toastId:"walletError",closeOnClick:!0,pauseOnHover:!1,draggable:!1});return}let d=JSON.stringify({voter:x._id,election:h}),S=await Te(d);if(!S)return;let J={address:Y.utils.toChecksumAddress(o),signature:S};const N=await Vt(h,J);if(N.error){console.log(N),E.error(U(`error ${N.status}`,`${N.data||N.statusText}`),{position:E.POSITION.BOTTOM_RIGHT});return}E.success(U("Signed for Election",`${m.title}`),{position:E.POSITION.BOTTOM_RIGHT}),p("/dashboard")};return C?e(ae,{replace:!0,to:C}):r?e(F,{}):n(w.Fragment,{children:[e("h1",{children:"Election Details"}),"Election Title: ",m.title,e("br",{}),"OpenTimeStamp: ",m.openTimestamp,e("br",{}),"Election CloseTimeStamp: ",m.closeTimestamp,e("div",{children:t&&n(w.Fragment,{children:[I===1&&e("a",{href:`${m.registrationLink}`,className:"btn btn-primary",children:"Apply"}),I===2&&e("button",{disabled:!0,className:"btn btn-primary",children:"Wait for approval"}),I===3&&e(k,{variant:"primary",onClick:async()=>{await v()},children:"Sign Wallet"}),I===4&&e("a",{href:`/elections/${h}/vote`,className:"btn btn-primary",children:"VOTE"}),I===5&&e("button",{className:"btn btn-primary",disabled:!0,children:"Already Voted!"})]})})]})};const Zt=()=>{const t=ee();let r=t.pathname.split("/")[2],a=t.state;const[s,o]=l.exports.useState({title:"",openTimestamp:new Date().addHours(.5),closeTimestamp:new Date().addHours(1),registrationLink:""}),[c,u]=l.exports.useState(null),[h,C]=l.exports.useState(null),[p,m]=l.exports.useState(!1);l.exports.useContext(A);const b=async g=>{g.preventDefault(),m(!0);try{const I=await Ht(s,r),{_id:f}=I;u(`/elections/${f}/manage`)}catch(I){console.log(I.response),C(I.response.data)}m(!1)},x=g=>{g.preventDefault(),u(`/org/${r}`)};return c?e(ae,{to:c,replace:!0}):n("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"70vh"},children:[e("h2",{className:"my-5",children:"Create an Election"}),n(i,{onSubmit:b,onReset:x,className:"bg-light rounded px-4 py-4",style:{background:"pink",minWidth:"40%"},children:[n(i.Group,{className:"my-4",controlId:"electionTitle",children:[e(i.Label,{children:"Title"}),e(i.Control,{type:"text",placeholder:"Enter election title",value:s.title,onChange:g=>{o(I=>P(L({},I),{title:g.target.value}))}})]}),n(i.Group,{className:"my-4",controlId:"organizer",children:[e(i.Label,{children:"Organization Name"}),e(i.Control,{type:"text",value:a,disabled:!0})]}),n(i.Group,{className:"my-4",controlId:"registrationLink",children:[e(i.Label,{children:"Registration Link"}),e(i.Control,{type:"text",placeholder:"Enter Registration Link",value:s.registrationLink,onChange:g=>{o(I=>P(L({},I),{registrationLink:g.target.value}))}})]}),n("div",{className:"my-4",children:[e("label",{children:"Election Start Time"}),e("br",{}),e(ie,{className:"w-100",onChange:g=>{o(I=>P(L({},I),{openTimestamp:g}))},value:s.openTimestamp,minDate:new Date,required:!0})]}),n("div",{className:"my-4",children:[e("label",{children:"Election End Time"}),e("br",{}),e(ie,{className:"w-100",onChange:g=>{o(I=>P(L({},I),{closeTimestamp:g}))},value:s.closeTimestamp,minDate:new Date})]}),e("br",{}),n("div",{className:"d-flex justify-content-center",children:[e(k,{variant:"secondary",type:"reset",className:"mx-4 px-3",children:"Discard"}),e(k,{variant:"success",type:"submit",className:"mx-4 px-4",disabled:p,children:p?"Saving...":"Save"})]})]}),h&&e(K,{variant:"danger",children:h})]})},er=t=>{const{candidates:r,handleDeleteCandidate:a}=t;return e(_,{children:(r==null?void 0:r.length)?e(O,{as:"ol",numbered:!0,children:r.map((s,o)=>n(O.Item,{as:"li",className:"d-flex align-items-center",children:[s.name,e(k,{variant:"outline-danger",className:"ms-auto",onClick:()=>a(s._id),children:"Delete"})]},s._id))}):"No candidates"})},tr=()=>{const[t,r]=l.exports.useState(!1),[a,s]=l.exports.useState(!1),[o,c]=l.exports.useState(!1),[u,h]=l.exports.useState(!1),[C,p]=l.exports.useState(!1),[m,b]=l.exports.useState(!1),x=l.exports.useRef(""),g=l.exports.useRef(!0),[I,f]=l.exports.useState([]),[v,d]=l.exports.useState({closeTimestamp:"",openTimestamp:"",organiser:"",title:"",registrationLink:""}),S=ee(),J=Q();let N=S.pathname.split("/")[2];l.exports.useEffect(()=>((async()=>{s(!0);const y=await Le(N);if(y.error){r("Invalid Election Id"),s(!1);return}y.deploymentAddress&&(alert("Election has already been deployed"),J(`/elections/${N}`,{replace:!0})),d(P(L({},y),{openTimestamp:new Date(y.openTimestamp),closeTimestamp:new Date(y.closeTimestamp)})),r(!1),s(!1)})(),()=>{r(!1),s(!1)}),[o]),l.exports.useEffect(()=>{(async()=>{const y=await ge(N);f(y)})()},[]);const M=async y=>{y.preventDefault(),h(!0);try{const z=await Bt(N,v);c(X=>!X),g.current=!0}catch(z){console.log(z.response),r(z.response.data)}h(!1)},T=y=>{y.preventDefault(),g.current=!0,c(z=>!z)},V=async()=>{const y=x.current.value;if(y=="")return;p(!0);try{const X=await Mt(N,{name:y})}catch(X){console.log(X.response),r(X.response.data);return}const z=await ge(N);f(z),x.current.value="",p(!1)},G=async y=>{try{const X=await zt(N,y)}catch(X){console.log(X.response),r(X.response.data);return}const z=await ge(N);f(z)},$=async()=>{b(!0);try{g.current=!1;const y=await Gt(N);console.log(y),E("Election has been deployed !!",{position:E.POSITION.BOTTOM_RIGHT,autoClose:5e3,closeOnClick:!0})}catch(y){console.log(y),r("Some Error occured while deploying the Election. Please try again after some time."),g.current=!0}b(!1)};return n("div",{className:"d-flex flex-column",children:[e("h1",{children:"Manage Election"}),a?e(F,{}):n("div",{className:"d-flex justify-content-around ",children:[n(i,{onSubmit:M,onReset:T,className:"bg-light rounded px-4 py-4",style:{background:"pink",width:"40%"},children:[n(i.Group,{className:"my-4",controlId:"electionTitle",children:[e(i.Label,{children:"Title"}),e(i.Control,{type:"text",placeholder:"Enter election title",value:v.title,onChange:y=>{g.current=!1,d(z=>P(L({},z),{title:y.target.value}))}})]}),n(i.Group,{className:"my-4",controlId:"electionId",children:[e(i.Label,{children:"Election Id"}),e(i.Control,{type:"text",value:N,disabled:!0})]}),n(i.Group,{className:"my-4",controlId:"organizer",children:[e(i.Label,{children:"Organization Name"}),e(i.Control,{type:"text",value:v.organiser,disabled:!0})]}),n(i.Group,{className:"my-4",controlId:"registrationLink",children:[e(i.Label,{children:"Registration Link"}),e(i.Control,{type:"text",placeholder:"Enter Registration Link",value:v.registrationLink,onChange:y=>{g.current=!1,d(z=>P(L({},z),{registrationLink:y.target.value}))}})]}),n("div",{className:"my-4",children:[e("label",{children:"Election Start Time"}),e("br",{}),e(ie,{className:"w-100",onChange:y=>{g.current=!1,d(z=>P(L({},z),{openTimestamp:y}))},value:v.openTimestamp,minDate:new Date,required:!0})]}),n("div",{className:"my-4",children:[e("label",{children:"Election End Time"}),e("br",{}),e(ie,{className:"w-100",onChange:y=>{g.current=!1,d(z=>P(L({},z),{closeTimestamp:y}))},value:v.closeTimestamp,minDate:new Date})]}),e("br",{}),n("div",{className:"d-flex justify-content-center",children:[e(k,{variant:"secondary",type:"reset",className:"mx-4 px-3",children:"Discard"}),e(k,{variant:"success",type:"submit",className:"mx-4 px-4",disabled:u,children:u?"Saving...":"Save"})]})]}),n("div",{className:"text-center bg-light px-3 py-2 rounded",style:{width:"40%",overflowY:"scroll",maxHeight:"70vh"},children:[e("h3",{children:"Candidates"}),n("div",{children:[e("input",{type:"text",ref:x,placeholder:"Candidate Name",className:"rounded px-3 py-2 shadow-sm mx-2",style:{outline:"none",border:"none",width:"60%"}}),e(k,{className:"my-3",onClick:V,disabled:C,children:C?"Adding Candidate...":"Add Candidate"})]}),e(er,{candidates:I,handleDeleteCandidate:G})]})]}),e(k,{className:"align-self-center my-4",disabled:!g.current,onClick:()=>{window.confirm(`An Election once deployed cannot be modified. 
Are you sure you want to continue?`)&&$()},children:m?"Deploying...":"Deploy Election"}),t&&e(K,{variant:"danger",children:t})]})},rr=()=>{let r=ee().pathname.split("/")[2];return console.log(r),e("div",{children:"Election Result Page"})},ar=()=>{const[t,r]=l.exports.useState(""),[a,s]=l.exports.useState(""),[o,c]=l.exports.useState(""),[u,h]=l.exports.useState(""),[C,p]=l.exports.useState(!1),[m,b]=l.exports.useState(!1),[x,g]=l.exports.useState(jt[0].value),I=Q(),{isAuth:f,setIsAuth:v,loading:d,setLoading:S}=l.exports.useContext(A);return l.exports.useEffect(()=>{v("token"in localStorage),f&&(S(!1),I("/dashboard",{replace:!0}))},[f]),e(_,{children:d?e(F,{}):e(_,{children:e("div",{children:n(oe,{children:[e("h1",{children:"Forgot Password"}),m&&e(K,{variant:"success",children:m}),C&&e(K,{variant:"danger",children:C}),n(i,{onSubmit:async N=>{if(N.preventDefault(),p(!1),b(!1),o!==u){p("Passwords don't match");return}switch(x){case"1":S(!0);const M="OTP for Forgot Password";try{await Pe({email:t,purpose:M}),g("2")}catch(T){console.log(T),T.response&&T.response.data.message?p(T.response.data.message):p(T.message)}S(!1);break;case"2":S(!0);try{await $e({email:t,otp:a}),g("3")}catch(T){console.log(T),T.response&&T.response.data.message?p(T.response.data.message):p(T.message)}S(!1);break;case"3":S(!0);try{await Ee({email:t,password:o}),b("Password has been changed")}catch(T){console.log(T),T.response&&T.response.data.message?p(T.response.data.message):p(T.message)}S(!1);break}},children:[(x==="1"||x==="2")&&n(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter your email",value:t,required:!0,onChange:N=>{p(!1),r(N.target.value)}})]}),x==="2"&&n(i.Group,{controlId:"otp",children:[e(i.Label,{children:"OTP"}),e(i.Control,{type:"text",placeholder:"Enter OTP received on email",value:a,required:!0,onChange:N=>{p(!1),s(N.target.value)}})]}),x==="3"&&n(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter new Password",value:o,required:!0,onChange:N=>{p(!1),c(N.target.value)}})]}),x==="3"&&n(i.Group,{controlId:"confirmPassword",children:[e(i.Label,{children:"Confirm Password"}),e(i.Control,{type:"password",placeholder:"Confirm your new Password",value:u,required:!0,onChange:N=>{p(!1),h(N.target.value)}})]}),e(W,{className:"py-3",children:e(H,{children:e(k,{type:"submit",variant:"primary",children:x=="1"?"Send OTP":x=="2"?"Confirm OTP":"Change Password"})})})]})]})})})})};var nr="./assets/fourOfour.e2f25f95.jpeg";const sr=()=>{const{loading:t,isAuth:r,setIsAuth:a}=l.exports.useContext(A);return l.exports.useEffect(()=>{a("token"in localStorage)}),e("div",{children:t?e(F,{}):n(_,{children:[n(q,{to:r?"/dashboard":"/",children:[e(at,{}),"Go back to the home page"]}),e("img",{src:nr})]})})},or=()=>{const{user:t,setUser:r,setIsAuth:a,setLoading:s}=l.exports.useContext(A),o=localStorage.getItem("token"),[c,u]=l.exports.useState(!1);return l.exports.useEffect(()=>{(async()=>{if(o&&!t){const h=await Et();h.error?(a(!1),s(!1),u(!0)):(r(h),a(!0))}})()},[o]),c?(localStorage.removeItem("token"),e(ae,{to:"/"})):(console.log("via private route"),o?e(Ne,{}):e(ae,{to:"/login"}))},lr=()=>(console.log("Organizer route"),e(Ne,{})),ir=()=>{const{loading:t,setLoading:r}=l.exports.useContext(A);ee();const[a,s]=l.exports.useState([]);return l.exports.useEffect(async()=>{r(!0);try{s(await ne(""))}catch(o){console.log(o)}r(!1)},[]),e(_,{children:t?e(F,{}):e("div",{children:a.map(o=>e("div",{children:e("a",{href:`elections/${o._id}`,children:o.title})}))})})},cr=()=>{const{chainId:t,setChainId:r}=l.exports.useContext(A);return n(nt,{children:[n("main",{className:"App py-3 bg-gray",children:[e(te,{children:e(mt,{})}),t!==80001&&n("p",{className:"alert alert-warning text-center",style:{padding:0,marginTop:0},children:["You are currently on"," ",e("span",{className:"fw-bold",children:ke(t)}),", please switch to ",e("span",{className:"fw-bold",children:ke(80001)}),". You can follow these"," ",e("span",{children:e("a",{className:"fw-bold",target:"_blank",rel:"noreferrer",href:"https://docs.polygon.technology/docs/develop/metamask/config-polygon-on-metamask/",children:"steps"})})]}),e(te,{children:n(st,{children:[e(B,{path:"*",element:e(sr,{})}),e(B,{exact:!0,path:"/",element:e(kt,{})}),e(B,{path:"/login",element:e(Pt,{})}),e(B,{path:"/signup",element:e($t,{})}),e(B,{path:"/forgotpassword",element:e(ar,{})}),e(B,{path:"/explore",element:e(ir,{})}),n(B,{path:"/",element:e(or,{}),children:[e(B,{exact:!0,path:"/dashboard",element:e(qt,{})}),e(B,{exact:!0,path:"/dashboard/wallet",element:e(Ft,{})}),e(B,{exact:!0,path:"/elections/:id",element:e(Qt,{})}),e(B,{exact:!0,path:"/elections/:id/result",element:e(rr,{})}),e(B,{exact:!0,path:"/elections/:id/manage",element:e(tr,{})}),e(B,{exact:!0,path:"/verifyEmail",element:e(Ut,{})}),e(B,{exact:!0,path:"/changePassword",element:e(Kt,{})}),n(B,{path:"/org",element:e(lr,{}),children:[e(B,{path:"/org",element:e(Yt,{})}),e(B,{path:"/org/:id",element:e(Xt,{})}),e(B,{path:"/org/:id/create-election",element:e(Zt,{})})]})]})]})})]}),e(ot,{style:{width:"30em"}})]})};lt.render(e(ct,{children:e(cr,{})}),document.getElementById("root"));
