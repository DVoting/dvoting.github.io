var ue=Object.defineProperty,he=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ae=(t,r,a)=>r in t?ue(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,F=(t,r)=>{for(var a in r||(r={}))me.call(r,a)&&ae(t,a,r[a]);if(re)for(var a of re(r))ge.call(r,a)&&ae(t,a,r[a]);return t},G=(t,r)=>he(t,pe(r));import{r as l,j as e,W as X,a as s,R as w,t as _,N as Y,C as W,b as z,c as U,F as P,d as fe,e as ve,f as ye,V as we,B as be,g as se,h as H,i as I,A as xe,S as Ce,u as M,k as q,l as Z,m as i,n as O,L as N,M as K,o as Se,p as B,q as C,T as Ie,s as J,v as ee,D as ne,w as Ee,O as Pe,x as ke,y as Ne,z as A,E as Te,G as Le}from"./vendor.dee3ff66.js";const Oe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}};Oe();const k=l.exports.createContext({user:null,walletId:null,isAuth:!1,loading:!1}),Ae=t=>{const[r,a]=l.exports.useState(""),[c,n]=l.exports.useState(null),[o,h]=l.exports.useState(!1),[p,m]=l.exports.useState(!1);return e(k.Provider,{value:{user:c,setUser:n,walletId:r,setWalletId:a,isAuth:o,setIsAuth:h,loading:p,setLoading:m},children:t.children})};let te;if(window.ethereum)console.log("MetaMask is installed!"),te=new X(window.ethereum);else{console.log("MetaMask is NOT installed!");const t=new X.providers.HttpProvider("https://polygon-rpc.com",{chainId:137,name:"matic"});te=new X(t)}var De=te;const oe=(t,r)=>s(w.Fragment,{children:[e("span",{children:t||""}),e("br",{}),e("span",{children:r||""})]});function He(t){var a;let r=(a=JSON.parse(localStorage.getItem("walletDisabled")))!=null?a:!1;console.log(r),window.ethereum&&(De.eth.getAccounts().then(c=>{r||t(c[0]||"")}).catch(console.log),window.ethereum.on("accountsChanged",c=>{var o;((o=JSON.parse(localStorage.getItem("walletDisabled")))!=null?o:!1)||t(c[0]||"")}))}async function qe(t){localStorage.setItem("walletDisabled",!0),t("")}async function $e(t){if(!window.ethereum){_.error(oe("Provider Error","MetaMask is NOT installed!"),{position:_.POSITION.BOTTOM_RIGHT,autoClose:5e3,toastId:"providerError",closeOnClick:!0,pauseOnHover:!1,draggable:!1});return}localStorage.setItem("walletDisabled",!1);try{const r=await window.ethereum.request({method:"eth_requestAccounts"});t(r[0]||"")}catch(r){console.log(r)}}const Re=()=>{const{user:t,setUser:r,isAuth:a,setIsAuth:c,setLoading:n}=l.exports.useContext(k),{walletId:o,setWalletId:h}=l.exports.useContext(k),p=()=>{localStorage.removeItem("token"),c(!1),r(null),n(!1)};return l.exports.useEffect(()=>He(h),[]),e("header",{children:e(Y,{children:s(W,{children:[e(z.LinkContainer,{to:a?"/dashboard":"/",children:e(Y.Brand,{children:"DVoting"})}),e(Y.Toggle,{"aria-controls":"basic-navbar-nav"}),s(U,{className:"ml-auto",children:[t?e(P,{children:s(fe,{children:[t.name,e(z.LinkContainer,{to:"#",onClick:p,children:s(U.Link,{children:[e(ve,{})," Logout"]})})]})}):s(P,{children:[e(z.LinkContainer,{to:"/login",children:s(U.Link,{children:[e(ye,{})," Log In"]})}),e(z.LinkContainer,{to:"/signup",children:s(U.Link,{children:[e(we,{})," SignUp"]})})]}),o===""?s(U.Link,{onClick:()=>$e(h),children:[e(be,{size:20})," Connect Wallet"]}):e(se,{title:o.slice(0,4)+"..."+o.slice(-4),children:e(se.Item,{onClick:()=>qe(h),children:"Disconnect"})})]})]})})})},j=({children:t})=>e(W,{children:e(H,{className:"justify-content-md-center",children:e(I,{xs:12,md:6,children:t})})}),$=({variant:t,children:r})=>e(xe,{variant:t,children:r});$.defaultProps={variant:"info"};const V=()=>e(Ce,{animation:"border",role:"status",style:{width:"4vh",height:"4vh",margin:"25vh auto",display:"block",color:"black"}}),Fe=()=>{const{isAuth:t,setIsAuth:r,loading:a,setLoading:c}=l.exports.useContext(k),n=M();return w.useEffect(()=>{c(!0),r("token"in localStorage),t&&n("/dashboard",{replace:!0}),c(!1)},[t]),e(P,{children:a?e(V,{}):e(P,{children:e("div",{children:"Voting App - Client..."})})})},R="https://dvoting-server.vercel.app/api",Ge=async t=>{try{const r={headers:{"Content-Type":"application/json"}},a=await q.post(`${R}/users/login`,t,r);return localStorage.setItem("token",a.data.token),a.data}catch(r){throw r}},Ve=async()=>{const t=localStorage.getItem("token"),r={headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`}};try{const{data:a}=await q.get(`${R}/users/profile`,r);return G(F({},a),{error:!1})}catch(a){return console.log(a.response),G(F({},a),{error:!0})}},Me=async t=>{try{const r={headers:{"Content-Type":"application/json"}},a=await q.post(`${R}/users`,t,r);return localStorage.setItem("token",a.data.token),a.data}catch(r){throw r}},Be=async t=>{try{const r=localStorage.getItem("token"),a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}},c=await q.put(`${R}/users/verify`,t,a);return localStorage.setItem("token",c.data.token),c.data}catch(r){throw r}},le=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await q.put(`${R}/users/profile`,t,r)).data}catch(r){throw r}},Ue=()=>{const[t,r]=l.exports.useState(""),[a,c]=l.exports.useState(""),[n,o]=l.exports.useState(!1),h=Z(),p=M(),m=h.search?h.search.split("=")[1]:"/",{isAuth:d,setIsAuth:g,loading:f,setLoading:y}=l.exports.useContext(k);return l.exports.useEffect(()=>{g("token"in localStorage),d&&(y(!1),p("/dashboard",{replace:!0}))},[d]),e(P,{children:f?e(V,{}):e(P,{children:e("div",{children:s(j,{children:[e("h1",{children:"Login"}),n&&e($,{variant:"danger",children:n}),s(i,{onSubmit:async u=>{u.preventDefault(),y(!0);try{await Ge({email:t,password:a}),g("token"in localStorage)}catch(x){console.log(x),x.response&&x.response.data.message?o(x.response.data.message):o(x.message)}y(!1)},onReset:u=>{u.preventDefault(),r(""),c("")},children:[s(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter email",value:t,required:!0,onChange:u=>{o(!1),r(u.target.value)}})]}),s(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter password",value:a,required:!0,onChange:u=>{o(!1),c(u.target.value)}})]}),s(H,{className:"py-3",children:[e(I,{children:e(O,{type:"submit",variant:"primary",children:"Sign In"})}),e(I,{children:e(O,{type:"reset",variant:"primary",children:"Reset"})})]}),s(H,{children:[s(I,{children:["New User?"," ",e(N,{to:m?`/signup?redirect=${m}`:"/signup",children:"Register Here"})]}),s(I,{children:["Forgot Password?"," ",e(N,{to:m?`/forgotpassword?redirect=${m}`:"/forgotpassword",children:"Click here"})]})]})]})]})})})})},je=()=>{const[t,r]=l.exports.useState(""),[a,c]=l.exports.useState(""),[n,o]=l.exports.useState(""),[h,p]=l.exports.useState(""),[m,d]=l.exports.useState("voter"),[g,f]=l.exports.useState(!1),y=Z(),S=M(),T=y.search?y.search.split("=")[1]:"/",{isAuth:u,setIsAuth:x,loading:L,setLoading:v}=l.exports.useContext(k);return l.exports.useEffect(()=>{x("token"in localStorage),u&&(v(!1),S("/dashboard",{replace:!0}))},[u]),e(P,{children:L?e(V,{}):e(P,{children:e("div",{children:s(j,{children:[e("h1",{children:"SignUp"}),g&&e($,{variant:"danger",children:g}),s(i,{onSubmit:async E=>{E.preventDefault(),v(!0);try{await Me({username:a,email:n,password:h,name:t,userType:m}),x("token"in localStorage)}catch(b){console.log(b),b.response&&b.response.data.message?f(b.response.data.message):f(b.message)}v(!1)},onReset:E=>{E.preventDefault(),r(""),c(""),o(""),p(""),d("voter")},children:[s(i.Group,{controlId:"name",children:[e(i.Label,{children:"Name"}),e(i.Control,{type:"text",placeholder:"Enter name",value:t,required:!0,onChange:E=>{f(!1),r(E.target.value)}})]}),s(i.Group,{controlId:"username",children:[e(i.Label,{children:"Username"}),e(i.Control,{type:"text",placeholder:"Enter username",value:a,required:!0,onChange:E=>{f(!1),c(E.target.value)}})]}),s(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter email",value:n,required:!0,onChange:E=>{f(!1),o(E.target.value)}})]}),s(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter password",value:h,required:!0,onChange:E=>{f(!1),p(E.target.value)}})]}),s(H,{className:"py-3",children:[e(I,{children:e(O,{type:"submit",variant:"primary",children:"Sign Up"})}),e(I,{children:e(O,{type:"reset",variant:"primary",children:"Reset"})})]}),e(H,{children:s(I,{children:["Already registered?"," ",e(N,{to:T?`/login?redirect=${T}`:"/signup",children:"Login Here"})]})})]})]})})})})},_e=t=>{const{show:r,setShow:a}=t,[c,n]=w.useState({organisationName:""}),o=m=>{n(G(F({},c),{[m.target.name]:m.target.value}))},h=m=>{m.preventDefault(),p()&&console.log(c)},p=()=>c.organisationName.length<4?(_.error(oe("Organiser Name","must be at least 4 characters long"),{position:_.POSITION.BOTTOM_RIGHT}),!1):!0;return s(K,{size:"lg",show:r,onHide:()=>a(!1),"aria-labelledby":"createOrganiserModal",children:[e(K.Header,{closeButton:!0,children:e(K.Title,{id:"createOrganiserModal",children:"Create Organiser"})}),e(K.Body,{children:s(i,{children:[e(Se,{label:"Organiser name",className:"mb-3",children:e(i.Control,{type:"text",name:"organisationName",value:c.organisationName,onChange:o,required:!0})}),e(O,{className:"text-center",variant:"primary",type:"submit",onClick:h,children:"Create"})]})})]})};async function We(t){try{const{data:r}=await q.get(`${R}/voters/${t}`);return console.log(r),r}catch(r){return console.log(r),null}}const ze=async(t,r)=>{const a=localStorage.getItem("token"),c={headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`}},n=G(F({},t),{organiser:r,registrationLink:"https://dvoting.github.io"});console.log(n);try{const{data:o}=await q.post(`${R}/elections`,n,c);return o}catch(o){throw console.log(o),o}};async function Q(t){try{const{data:r}=await q.get(`${R}/elections?${t}`);return console.log(t,r),r.docs}catch(r){return console.log(r),null}}const Ke=()=>{const{user:t,loading:r,setLoading:a}=w.useContext(k),[c,n]=w.useState(!1),[o,h]=w.useState(null),[p,m]=w.useState([]),[d,g]=w.useState([]),[f,y]=w.useState([]),[S,T]=w.useState([]);return w.useEffect(()=>{a(t===null),console.log(t)},[t]),w.useEffect(async()=>{t&&h(await We(t.uniqueVoterId))},[t]),w.useEffect(async()=>{if(o&&o.invitations.length>0){const u=`ids=${o.invitations.join(",")}`;m(await Q(u))}},[o]),w.useEffect(async()=>{if(t){const u=`appliedVoter=${t.uniqueVoterId}`;g(await Q(u))}},[t]),w.useEffect(async()=>{if(t){const u=`approvedVoter=${t.uniqueVoterId}`;y(await Q(u))}},[t]),w.useEffect(async()=>{if(t){const u=`appearedVoter=${t.uniqueVoterId}`;T(await Q(u))}},[t]),e(w.Fragment,{children:r?e(V,{}):e(w.Fragment,{children:e(W,{children:s(H,{children:[s(I,{md:12,lg:4,children:[e(B,{children:t&&s(w.Fragment,{children:[e(B.Header,{children:"User Profile"}),s(C,{variant:"flush",children:[s(C.Item,{children:["Username: ",t.username]}),s(C.Item,{children:["Name: ",t.name]}),s(C.Item,{children:["E-mail: ",t.email," ",t.emailVerified?e("span",{className:"text-success",children:"verified"}):e(N,{to:"/verifyEmail",children:"verify"})]}),s(C.Item,{children:["UVID: ",t.uniqueVoterId]}),o&&s(C.Item,{children:["Wallet:"," ",o.hasWallet?e("span",{className:"text-success",children:"assigned"}):e(N,{to:"#",children:"generate"})]}),e(C.Item,{children:e(N,{to:"/changePassword",children:"Change Password"})})]})]})}),e(B,{style:{marginTop:"5%",marginBottom:"5%"},children:t&&s(C,{variant:"flush",children:[t.userType==="voter"&&s(w.Fragment,{children:[e(C.Item,{onClick:()=>n(!0),style:{cursor:"pointer"},children:"Register an Organisation"}),e(_e,{show:c,setShow:n})]}),t.userType==="organiser"&&e(N,{to:"#",children:e(C.Item,{children:"Manage Organisations"})})]})})]}),e(I,{md:12,lg:8,children:s(B,{children:[e(B.Header,{children:"Elections"}),e(B.Body,{children:o&&s(Ie,{defaultActiveKey:"invited",className:"mb-3",children:[e(J,{eventKey:"invited",title:"Invited",children:p.length>0?e(C,{variant:"flush",children:p.map(u=>e(N,{to:"#",children:e(C.Item,{children:u.title})},u._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(J,{eventKey:"approved",title:"Approved",children:f.length>0?e(C,{variant:"flush",children:f.map(u=>e(N,{to:"#",children:e(C.Item,{children:u.title})},u._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(J,{eventKey:"applied",title:"Applied",children:d.length>0?e(C,{variant:"flush",children:d.map(u=>e(N,{to:"#",children:e(C.Item,{children:u.title})},u._id))}):e(w.Fragment,{children:"Nothing here... "})}),e(J,{eventKey:"appeared",title:"Appeared",children:S.length>0?e(C,{variant:"flush",children:S.map(u=>e(N,{to:"#",children:e(C.Item,{children:u.title})},u._id))}):e(w.Fragment,{children:"Nothing here... "})})]})})]})})]})})})})},Je=[{name:"Email not entered",value:"1"},{name:"OTP sent from server",value:"2"},{name:"Change password",value:"3"}],Qe=[{name:"Email not pressed",value:"1"},{name:"OTP sent from server",value:"2"}],ie=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await q.put(`${R}/otp`,t,r)).data}catch(r){throw r}},ce=async t=>{try{const r={headers:{"Content-Type":"application/json"}};return(await q.patch(`${R}/otp/verify`,t,r)).data}catch(r){throw r}},Xe=()=>{const{user:t,loading:r,setLoading:a,setUser:c}=l.exports.useContext(k),[n,o]=l.exports.useState("fetching..."),[h,p]=l.exports.useState(""),[m,d]=l.exports.useState(Qe[0].value),[g,f]=l.exports.useState(!1),[y,S]=l.exports.useState(!1),T=M();return l.exports.useEffect(()=>{a(!0),t&&(o(t.email),a(!1),t.emailVerified&&T("/dashboard",{replace:!0}))},[t]),e(P,{children:r?e(V,{}):e("div",{children:s(j,{children:[e("h1",{children:"Verify Email"}),y&&e($,{variant:"success",children:y}),g&&e($,{variant:"danger",children:g}),e(i,{onSubmit:async x=>{switch(x.preventDefault(),f(!1),S(!1),m){case"1":a(!0);const L="OTP for e-mail Verification";try{await ie({email:n,purpose:L}),d("2")}catch(v){console.log(v),v.response&&v.response.data.message?f(v.response.data.message):f(v.message)}a(!1);break;case"2":a(!0);try{await ce({email:n,otp:h});const v=await Be({email:n});S("Email has been verified"),c(v),T("/dashboard",{replace:!0})}catch(v){console.log(v),v.response&&v.response.data.message?f(v.response.data.message):f(v.message)}a(!1);break}},children:e(H,{className:"py-3",children:s(I,{children:[s(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter your email",value:n,disabled:!0,required:!0})]}),m==="2"&&s(i.Group,{controlId:"otp",children:[e(i.Label,{children:"OTP"}),e(i.Control,{type:"text",placeholder:"Enter OTP received on email",value:h,required:!0,onChange:x=>{f(!1),p(x.target.value)}})]}),e(H,{className:"py-3",children:e(I,{children:e(O,{type:"submit",variant:"primary",children:m=="1"?"Send OTP":"Verify Email"})})})]})})})]})})})},Ye=()=>{const[t,r]=l.exports.useState("fetching..."),[a,c]=l.exports.useState(""),[n,o]=l.exports.useState(""),[h,p]=l.exports.useState(!1),[m,d]=l.exports.useState(!1),g=M(),{loading:f,user:y,setLoading:S}=l.exports.useContext(k);return l.exports.useEffect(()=>{S(!0),y&&(r(y.email),S(!1))},[y]),e(P,{children:f?e(V,{}):e("div",{children:s(j,{children:[e("h1",{children:"Change Password"}),m&&e($,{variant:"success",children:m}),h&&e($,{variant:"danger",children:h}),s(i,{onSubmit:async x=>{if(x.preventDefault(),p(!1),d(!1),a!==n){p("Passwords don't match");return}try{S(!0),await le({email:t,password:a}),S(!1),d("Password changed.. Redirecting to dashboard"),setTimeout(()=>{g("/dashboard",{replace:!0})},[1e3])}catch(L){console.log(L),L.response&&L.response.data.message?p(L.response.data.message):p(L.message)}},onReset:async x=>{x.preventDefault(),c(""),o(""),p(!1),d(!1)},children:[s(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter new Password",value:a,required:!0,onChange:x=>{p(!1),c(x.target.value)}})]}),s(i.Group,{controlId:"confirmPassword",children:[e(i.Label,{children:"Confirm Password"}),e(i.Control,{type:"password",placeholder:"Confirm your new Password",value:n,required:!0,onChange:x=>{p(!1),o(x.target.value)}})]}),s(H,{className:"py-3",children:[e(I,{children:e(O,{type:"submit",variant:"primary",children:"Change Password"})}),e(I,{children:e(O,{type:"reset",variant:"primary",children:"Reset"})})]})]})]})})})},Ze=()=>{const t=Z();return console.log(t),e("div",{children:"Election Details Page"})};const et=()=>{const[t,r]=l.exports.useState({title:"",openTimestamp:new Date,closeTimestamp:new Date}),[a,c]=l.exports.useState(null),[n,o]=l.exports.useState(null),{user:h}=l.exports.useContext(k),p=async d=>{d.preventDefault();try{const g=await ze(t,h._id),{_id:f}=g;c(`/elections/${f}`)}catch(g){console.log(g.response),o(g.response.data)}},m=d=>{d.preventDefault(),c("/dashboard")};return a?e(ee,{to:a,replace:!0}):s("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{height:"70vh"},children:[e("h2",{className:"my-5",children:"Create an Election"}),s(i,{onSubmit:p,onReset:m,className:"bg-light rounded px-4 py-4",style:{background:"pink",minWidth:"40%"},children:[s(i.Group,{className:"my-4",controlId:"electionTitle",children:[e(i.Label,{children:"Title"}),e(i.Control,{type:"text",placeholder:"Enter election title",value:t.title,onChange:d=>{r(g=>G(F({},g),{title:d.target.value}))}})]}),s("div",{className:"my-4",children:[e("label",{children:"Election Start Time"}),e("br",{}),e(ne,{className:"w-100",onChange:d=>{r(g=>G(F({},g),{openTimestamp:d}))},value:t.openTimestamp,minDate:new Date,required:!0})]}),s("div",{className:"my-4",children:[e("label",{children:"Election End Time"}),e("br",{}),e(ne,{className:"w-100",onChange:d=>{r(g=>G(F({},g),{closeTimestamp:d}))},value:t.closeTimestamp,minDate:t.openTimestamp})]}),e("br",{}),s("div",{className:"d-flex justify-content-center",children:[e(O,{variant:"secondary",type:"reset",className:"mx-4 px-3",children:"Discard"}),e(O,{variant:"success",type:"submit",className:"mx-4 px-4",children:"Save"})]})]}),n&&e($,{variant:"danger",children:n})]})},tt=()=>{const[t,r]=l.exports.useState(""),[a,c]=l.exports.useState(""),[n,o]=l.exports.useState(""),[h,p]=l.exports.useState(""),[m,d]=l.exports.useState(!1),[g,f]=l.exports.useState(!1),[y,S]=l.exports.useState(Je[0].value),T=M(),{isAuth:u,setIsAuth:x,loading:L,setLoading:v}=l.exports.useContext(k);return l.exports.useEffect(()=>{x("token"in localStorage),u&&(v(!1),T("/dashboard",{replace:!0}))},[u]),e(P,{children:L?e(V,{}):e(P,{children:e("div",{children:s(j,{children:[e("h1",{children:"Forgot Password"}),g&&e($,{variant:"success",children:g}),m&&e($,{variant:"danger",children:m}),s(i,{onSubmit:async D=>{if(D.preventDefault(),d(!1),f(!1),n!==h){d("Passwords don't match");return}switch(y){case"1":v(!0);const E="OTP for Forgot Password";try{await ie({email:t,purpose:E}),S("2")}catch(b){console.log(b),b.response&&b.response.data.message?d(b.response.data.message):d(b.message)}v(!1);break;case"2":v(!0);try{await ce({email:t,otp:a}),S("3")}catch(b){console.log(b),b.response&&b.response.data.message?d(b.response.data.message):d(b.message)}v(!1);break;case"3":v(!0);try{await le({email:t,password:n}),f("Password has been changed")}catch(b){console.log(b),b.response&&b.response.data.message?d(b.response.data.message):d(b.message)}v(!1);break}},children:[(y==="1"||y==="2")&&s(i.Group,{controlId:"email",children:[e(i.Label,{children:"Email Address"}),e(i.Control,{type:"email",placeholder:"Enter your email",value:t,required:!0,onChange:D=>{d(!1),r(D.target.value)}})]}),y==="2"&&s(i.Group,{controlId:"otp",children:[e(i.Label,{children:"OTP"}),e(i.Control,{type:"text",placeholder:"Enter OTP received on email",value:a,required:!0,onChange:D=>{d(!1),c(D.target.value)}})]}),y==="3"&&s(i.Group,{controlId:"password",children:[e(i.Label,{children:"Password"}),e(i.Control,{type:"password",placeholder:"Enter new Password",value:n,required:!0,onChange:D=>{d(!1),o(D.target.value)}})]}),y==="3"&&s(i.Group,{controlId:"confirmPassword",children:[e(i.Label,{children:"Confirm Password"}),e(i.Control,{type:"password",placeholder:"Confirm your new Password",value:h,required:!0,onChange:D=>{d(!1),p(D.target.value)}})]}),e(H,{className:"py-3",children:e(I,{children:e(O,{type:"submit",variant:"primary",children:y=="1"?"Send OTP":y=="2"?"Confirm OTP":"Change Password"})})})]})]})})})})};var rt="/assets/fourOfour.e2f25f95.jpeg";const at=()=>{const{loading:t,isAuth:r,setIsAuth:a}=l.exports.useContext(k);return l.exports.useEffect(()=>{a("token"in localStorage)}),e("div",{children:t?e(V,{}):s(P,{children:[s(N,{to:r?"/dashboard":"/",children:[e(Ee,{}),"Go back to the home page"]}),e("img",{src:rt})]})})},st=()=>{const{user:t,setUser:r,setIsAuth:a,setLoading:c}=l.exports.useContext(k),n=localStorage.getItem("token"),[o,h]=l.exports.useState(!1);return l.exports.useEffect(()=>{(async()=>{if(n&&!t){const p=await Ve();p.error?(a(!1),c(!1),h(!0)):(r(p),a(!0))}})()},[n]),o?(localStorage.removeItem("token"),e(ee,{to:"/"})):(console.log("via private route"),n?e(Pe,{}):e(ee,{to:"/login"}))},nt=()=>s(ke,{children:[e("main",{className:"App py-3 bg-gray",children:s(W,{children:[e(Re,{}),s(Ne,{children:[e(A,{path:"*",element:e(at,{})}),e(A,{exact:!0,path:"/",element:e(Fe,{})}),e(A,{path:"/login",element:e(Ue,{})}),e(A,{path:"/signup",element:e(je,{})}),e(A,{path:"/forgotpassword",element:e(tt,{})}),s(A,{path:"/",element:e(st,{}),children:[e(A,{exact:!0,path:"/dashboard",element:e(Ke,{})}),e(A,{exact:!0,path:"/elections/:id",element:e(Ze,{})}),e(A,{exact:!0,path:"/create-election",element:e(et,{})}),e(A,{exact:!0,path:"/verifyEmail",element:e(Xe,{})}),e(A,{exact:!0,path:"/changePassword",element:e(Ye,{})})]})]})]})}),e(Te,{style:{width:"25em"}})]});Le.render(e(Ae,{children:e(nt,{})}),document.getElementById("root"));
